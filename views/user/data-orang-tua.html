<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>formulir</title>
        <link rel="stylesheet" href="../../assets/styles/styles.css" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
            integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>
    <body>
        <!-- Menu mobile -->
        <div class="menu-mobile">
            <button class="menu-close">X</button>
            <a href="index.html">
                <i class="fa-solid fa-house"></i>
                <span>Dashboard</span>
            </a>

            <a href="biodata.html">
                <i class="fa-solid fa-user-group"></i>
                <span>Biodata</span>
            </a>

            <a href="../../logout.php">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
        <!-- End menu MObile -->

        <!-- sidebar -->
        <div class="sidebar">
            <ul class="menu">
                <li>
                    <a href="index.html">
                        <i class="fa-solid fa-bars"></i>
                        <span>Menu</span>
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <i class="fa-solid fa-house"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="biodata.html">
                        <i class="fa-solid fa-user-group"></i>
                        <span>Biodata</span>
                    </a>
                </li>

                <li class="logout">
                    <a href="../../logout.php">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- sidebar -->
        <!-- sidebar -->
        <div class="main--content">
            <div class="header--wrapper">
                <div class="header--title">
                    <img src="../../assets/images/logo.png" alt="" />
                    <div class="teks">
                        <span>Selamat Datang</span>
                        <h2>Di SMA AL FASANAH</h2>
                    </div>
                </div>
            </div>
            <!-- end sidebar -->
            <!-- list user -->
            <div class="list--wrapper formulir">
                <div class="list--container">
                    <form action="">
                        <h3 class="main--title">Data Orang Tua</h3>
                        <div class="kolom-isi">
                            <label for="nama-orang-tua"> Nama Orang Tua </label>
                            <input
                                type="text"
                                id="nama-orang-tua"
                                name="nama-orang-tua"
                                maxlength="50"
                                required
                            />
                        </div>
                        <div class="kolom-isi">
                            <label for="nomor-telepon-orang-tua">
                                No Telepon
                            </label>
                            <input
                                type="text"
                                id="nomor-telepon-orang-tua"
                                name="nomor-telepon-orang-tua"
                                maxlength="15"
                            />
                        </div>
                        <div class="kolom-isi">
                            <label for="pekerjaan-orang-tua"> Pekerjaan </label>
                            <input
                                type="text"
                                id="pekerjaan-orang-tua"
                                name="pekerjaan-orang-tua"
                                maxlength="50"
                            />
                        </div>
                        <div class="kolom-isi">
                            <label for="alamat-orang-tua"> Alamat </label>
                            <input
                                type="text"
                                id="alamat-orang-tua"
                                name="alamat-orang-tua"
                            />
                        </div>
                        <div class="tombol-form">
                            <button type="reset" name="reset" id="reset">
                                Batal
                            </button>
                            <button
                                type="submit"
                                name="simpan"
                                id="simpan"
                                onclick="kirimForm('orangtua', event)"
                            >
                                Simpan
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- end formulir -->
        <script src="../../assets/scripts/cek-sesi.js"></script>
        <script src="../../assets/scripts/user.js"></script>
        <script>
            window.onload = function () {
                cekSesi();

                // Ambil data orang tua
                const ambilData = new XMLHttpRequest();
                ambilData.open(
                    "GET",
                    "../../backend/menu-calon.php?data-ortu=true",
                    true
                );

                ambilData.send();

                ambilData.onload = function () {
                    if (ambilData.status === 200) {
                        try {
                            const respon = JSON.parse(ambilData.responseText);
                            if (respon.status === "error") {
                                alert(respon.message);
                            } else {
                                let kolomIsian = document.querySelectorAll(
                                    "form input, form select"
                                );
                                for (let i = 0; i < kolomIsian.length; i++) {
                                    kolomIsian[i].value = respon.data[i];
                                }
                            }
                        } catch (errMsg) {
                            console.dir({
                                Kesalahan: errMsg,
                                "XMLHttpRequest Respon": ambilData.responseText,
                            });
                        }
                    }
                };
            };
        </script>
    </body>
</html>
