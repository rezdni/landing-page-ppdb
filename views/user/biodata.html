<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>User-panel</title>
        <link rel="stylesheet" href="../../assets/styles/styles.css" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
            integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>
    <body>
        <!-- sidebar -->
        <div class="sidebar">
            <div class="logo"></div>
            <ul class="menu">
                <li>
                    <a href="#">
                        <i class="fa-solid fa-bars"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa-solid fa-user-group"></i>
                        <span>Data Siswa</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-chart-bar"></i>
                        <span>Data Pendaftar</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa-solid fa-envelope"></i>
                        <span>Pengelola Pengumunan</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-question-circle"></i>
                        <span>FAQ</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-star"></i>
                        <span>Testimonia</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-cog"></i>
                        <span>setting</span>
                    </a>
                </li>
                <li class="logout">
                    <a href="../../logout.php">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- sidebar -->
        <div class="main--content">
            <div class="header--wrapper">
                <div class="header--title">
                    <span>SMA AL FASNAH</span>
                    <h2>Dashboard</h2>
                </div>
            </div>
            <!-- end sidebar -->
            <!-- biodata status -->
            <div class="list--wrapper">
                <h3 class="main--title">Biodata</h3>
                <div class="list--container">
                    <div class="tabel-biodata-siswa">
                        <table class="list-biodata">
                            <thead>
                                <tr>
                                    <td>Nama</td>
                                    <td>: Reza</td>
                                </tr>
                                <tr>
                                    <td>Tanggal Lahir</td>
                                    <td id="tgl-lahir">: 90-90-9000</td>
                                </tr>
                                <tr>
                                    <td>NISN</td>
                                    <td>: 123456</td>
                                </tr>
                                <tr>
                                    <td>Jenis Kelamin</td>
                                    <td>: Laki-Laki</td>
                                </tr>
                                <tr>
                                    <td>Agama</td>
                                    <td>: Islam</td>
                                </tr>
                                <tr>
                                    <td>Asal Sekolah</td>
                                    <td>: hjsahjlsha</td>
                                </tr>
                                <tr>
                                    <td>Kewarganegaraan</td>
                                    <td>: WNI</td>
                                </tr>
                                <tr>
                                    <td>Golongan Darah</td>
                                    <td>: O</td>
                                </tr>
                            </thead>
                        </table>
                        <table class="list-biodata">
                            <thead>
                                <tr>
                                    <td>Alamat</td>
                                    <td>: Bisa Panjang</td>
                                </tr>
                                <tr>
                                    <td>Provinsi</td>
                                    <td>: Jawa Barat</td>
                                </tr>
                                <tr>
                                    <td>Kota/Kabupaten</td>
                                    <td>: Sesuaikan</td>
                                </tr>
                                <tr>
                                    <td>Kecamatan</td>
                                    <td>: Sesuaikan</td>
                                </tr>
                                <tr>
                                    <td>Kelurahan</td>
                                    <td>: Sesuaikan</td>
                                </tr>
                                <tr>
                                    <td>Kode Pos</td>
                                    <td>: 12345</td>
                                </tr>
                                <tr>
                                    <td>No Telepon</td>
                                    <td>: 089009099009</td>
                                </tr>
                                <tr>
                                    <td>Jurusan</td>
                                    <td>: Sesuaikan</td>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- end biodata status -->
        <script src="../../assets/scripts/cek-sesi.js"></script>
        <script>
            // Konversi tanggal
            function konversiTanggal(tanggal) {
                const tglObj = new Date(tanggal);
                const bulan = [
                    "Januari",
                    "Februari",
                    "Maret",
                    "April",
                    "Mei",
                    "Juni",
                    "Juli",
                    "Agustus",
                    "September",
                    "Oktober",
                    "November",
                    "Desember",
                ];

                const hari = tglObj.getDate();
                const namaBulan = bulan[tglObj.getMonth()];
                const tahun = tglObj.getFullYear();

                const hasilKonversi = `${hari} ${namaBulan} ${tahun}`;
                return hasilKonversi;
            }
            // Muat data
            function muatDataCalon() {
                // Ajax
                let dataCalon = new XMLHttpRequest();
                dataCalon.open(
                    "GET",
                    "../../backend/menu-calon.php?data-diri=true",
                    true
                );
                dataCalon.setRequestHeader("Content-Type", "application/json");

                dataCalon.send();

                dataCalon.onload = function () {
                    if (dataCalon.status === 200) {
                        try {
                            let data = JSON.parse(dataCalon.responseText);

                            if (data.status === "success") {
                                // Tabel biodata
                                let tabel = document.querySelectorAll("table");
                                let indeks = 0;

                                tabel.forEach((elmTabel) => {
                                    let tdIsi =
                                        elmTabel.querySelectorAll(
                                            "td:nth-child(2)"
                                        );
                                    tdIsi.forEach((elmIsi) => {
                                        elmIsi.innerText =
                                            ": " + data.data[indeks];
                                        indeks++;
                                    });
                                });

                                // Konversi tanggal
                                let tglLahir =
                                    document.getElementById("tgl-lahir");
                                tglLahir.innerText =
                                    ": " + konversiTanggal(tglLahir.innerText);
                            }
                        } catch (kesalahan) {
                            alert("Terjadi kesalahan");
                            console.log(kesalahan);
                        }
                    }
                };
            }

            window.onload = function () {
                cekSesi();
                muatDataCalon();
            };
        </script>
    </body>
</html>
